<!DOCTYPE html>

<html lang="eng">
<head>
<title>Validation output visualiser</title>
<link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" rel="stylesheet"/>
<!-- <link rel="stylesheet" href="style.css"/> -->
<!-- integrate stylesheet into HTML page via templating -->
<style>
        .counter-par {
            text-align: center;
            font-size: larger;
        }
        .error-counter {
            font-size: larger;
        }
        table {
            margin: 1em 1em 1em 1em;
            border: 1px solid black;
        }
        th {
            font-style: italic;
        }
        td, th {
            border: 1px solid black; padding: 0.3em;
        }
        .error-icon {
            display: inline-block;
            width: 0.8em;
            height: 0.8em;
            margin-right: 0.1em;
            margin-left: 0.1em;
        }
        .highlight.error span {
            background-color: lightcoral;
        }
        .highlight.warning span {
            background-color: orange;
        }
        .invalid-data.error {
            display: inline-block;
            text-decoration: underline;
            text-decoration-color: LightCoral;
            text-decoration-thickness: 0.1em;
        }
        .invalid-data.warning {
            display: inline-block;
            text-decoration: underline;
            text-decoration-color: Orange;
            text-decoration-thickness: 0.1em;
        }

    </style>
</head>
<body>
<div class="general-info container-fluid">
<p class="counter-par"><b>There are <span class="error-counter">1</span> errors/warnings in the table submitted for validation.</b></p>
<p>The parts of the table that did not validate are marked by an underlining and immediately followed by a coloured square. Data that did not validate is divided into 2 categories: data involved in an Error and data involved in a Warning. An Error prevents the whole row containing it to be processed by the OpenCitations software; a Warning represents the need for the user to manually double-check the interested data, as it is not possible to automatically determine its correctness. Data involving an <span style="background-color: LightCoral">Error</span> is marked by a <span style="text-decoration: underline; text-decoration-color: LightCoral">red underline</span>, data involving a <span style="background-color: orange">Warning</span> is marked by an <span style="text-decoration: underline; text-decoration-color: orange">orange underline</span>.</p>
<p>Each single coloured square represents the association between an Error/Warning and a single piece of data (immediately preceding it in the document). Squares of the same colour all represent the same error instance. Therefore, an error that involves multiple parts of the table will be represented by as many squares as the number of involved parts.</p>
<p>To get an explanation of an Error/Warning, hover with the mouse cursor over any of the squares that represent it. If you click on it, all the data involved in the Error/Warning will be highlighted.</p>
</div>
<div class="table-container">
<table id="table-data"><thead><tr><th>row no.</th><th>id</th><th>title</th><th>author</th><th>pub_date</th><th>venue</th><th>volume</th><th>issue</th><th>page</th><th>type</th><th>publisher</th><th>editor</th></tr></thead><tr id="row5"><td><span>5</span></td><td><span class="field-value id"><span class="item"><span class="item-component"></span></span></span></td><td><span class="field-value title"><span class="item"><span class="item-component">Spatial Distribution of Ion Current Around HVDC Bundle Conductors</span></span></span></td><td><span class="field-value author"><span class="item"><span class="item-component">Zhou, Xiangxian</span></span>; <span class="item"><span class="item-component">Cui, Xiang</span></span>; <span class="item"><span class="item-component">Lu, Tiebing</span></span>; <span class="item"><span class="item-component">Fang, Chao</span></span>; <span class="item"><span class="item-component">Zhen, Yongzan</span></span></span></td><td><span class="field-value pub_date"><span class="item err-idx-0 invalid-data error"><span class="item-component">2012-1</span></span><span class="error error-icon err-idx-0" onclick="highlightInvolvedElements(this)" style="background-color: #ee42b1" title="The value in this field is not expressed in compliance with the syntax of OpenCitations CITS-CSV/META-CSV.  The content of 'citing_publication_date'/'cited_publication_date' (for CITS-CSV) or 'pub_date' (for META-CSV) must be of one of the following  forms (according to standard ISO 86014): YYYY-MM-DD, YYYY-MM, YYYY. If year is required, month and day  are optional. If the day is expressed, the day must also be expressed. Examples: '2000'; '2000-04'; '2000-04-27'."></span></span></td><td><span class="field-value venue"><span class="item"><span class="item-component">IEEE Transactions on Power Delivery</span> [<span class="item-component">issn:0885-8977</span> <span class="item-component">issn:1937-4208</span>]</span></span></td><td><span class="field-value volume"><span class="item"><span class="item-component">27</span></span></span></td><td><span class="field-value issue"><span class="item"><span class="item-component">1</span></span></span></td><td><span class="field-value page"><span class="item"><span class="item-component">380-390</span></span></span></td><td><span class="field-value type"><span class="item"><span class="item-component">journal article</span></span></span></td><td><span class="field-value publisher"><span class="item"><span class="item-component">Institute of Electrical and Electronics Engineers (IEEE)</span> [<span class="item-component">crossref:263</span>]</span></span></td><td><span class="field-value editor"><span class="item"><span class="item-component"></span></span></span></td></tr></table>
</div><div class="general-info container-fluid">
<p class="counter-par"><b>There are <span class="error-counter">1</span> errors/warnings in the table submitted for validation.</b></p>
<p>The parts of the table that did not validate are marked by an underlining and immediately followed by a coloured square. Data that did not validate is divided into 2 categories: data involved in an Error and data involved in a Warning. An Error prevents the whole row containing it to be processed by the OpenCitations software; a Warning represents the need for the user to manually double-check the interested data, as it is not possible to automatically determine its correctness. Data involving an <span style="background-color: LightCoral">Error</span> is marked by a <span style="text-decoration: underline; text-decoration-color: LightCoral">red underline</span>, data involving a <span style="background-color: orange">Warning</span> is marked by an <span style="text-decoration: underline; text-decoration-color: orange">orange underline</span>.</p>
<p>Each single coloured square represents the association between an Error/Warning and a single piece of data (immediately preceding it in the document). Squares of the same colour all represent the same error instance. Therefore, an error that involves multiple parts of the table will be represented by as many squares as the number of involved parts.</p>
<p>To get an explanation of an Error/Warning, hover with the mouse cursor over any of the squares that represent it. If you click on it, all the data involved in the Error/Warning will be highlighted.</p>
</div><div class="table-container">
<table id="table-data"><thead><tr><th>row no.</th><th>citing_id</th><th>cited_id</th></tr></thead><tr id="row1"><td><span>1</span></td><td><span class="field-value citing_id"><span class="item"><span class="item-component">doi:10.1007/s42835-022-01029-y</span></span></span></td><td><span class="field-value cited_id"><span class="item err-idx-0 invalid-data error"><span class="item-component">doi:10.1007/</span></span><span class="error error-icon err-idx-0" onclick="highlightInvolvedElements(this)" style="background-color: #76a4c9" title="The ID does not conform to the syntax (pattern) of its identifier scheme. Please refer to the relevant  documentation by the specific identifier provider."></span></span></td></tr></table>
</div>
<script crossorigin="anonymous" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
<!-- <script src="script.js"></script> -->
<!-- integrate JS script into HTML page via templating -->
<script>
    document.addEventListener('click', function(event) {
        const element = event.target;
        const onclickAttr = element.getAttribute('onclick');

        if (!onclickAttr || !onclickAttr.includes('highlightInvolvedElements(this)')) {
            // Remove all highlights globally across all tables
            document.querySelectorAll('.highlight').forEach(el => {
                el.classList.remove('highlight');
            });
        }
    });

    function highlightInvolvedElements(element) {
        const classList = element.className.split(' ');
        const targetClass = classList.find(className => className.startsWith('err-idx-'));
        if (targetClass) {
            // Clear highlights across all tables
            document.querySelectorAll('.highlight').forEach(el => {
                el.classList.remove('highlight');
            });

            // Add highlights only within the same table as the clicked element
            const parentTable = element.closest('table');
            if (parentTable) {
                const elements = parentTable.querySelectorAll('.' + targetClass);
                elements.forEach(el => {
                    el.classList.add('highlight');
                });
            }
        }
    }

</script>
</html>